<%- include('../../layout/header.ejs') %>
<link rel="stylesheet" href="/stylesheets/userStyles/userSignIn.css" type="text/css">
<link rel="stylesheet" href="/stylesheets/adminStyles/adminSignIn.css" type="text/css">
<link rel="stylesheet" href="/stylesheets/adminStyles/productEdit.css" type="text/css">
</head>
<body>
    <%- include('../../layout/adminNav.ejs') %>
 <div class="topMargin">
    <div class="topMargin d-flex flex-column align-items-center justify-content-center gap-2">
        <h1 class="mt-5">Product edit</h1>
        <!-- <h6>
          <% if(locals.success == true){ %>
              <span style="color: rgb(96, 156, 96)"> 
                  <b>
                    <%= locals.productName %>
                  </b> added succesfully</span>
              </span>
          <% } %>
      </h6> -->
        <form class="w-50" method="post" action="add" enctype="multipart/form-data">
            <div class="mb-3">
              <label for="productName" class="form-label">Product Name</label>
              <input type="text" value= <%= locals.product.productName %> name="productName" class="form-control" id="productName" placeholder="Enter product name">
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">Product Description</label>
              <textarea value = "<%= locals.product.description %>" class="form-control"name="description" id="productDescription" rows="3"></textarea>
            </div>
            <div class="mb-3">
              <label for="productImage" class="form-label">Product Image</label>
              <input <%= locals.product.image %> class="form-control" name="images" type="file" id="productImage" multiple>
            </div>
            <p class="currentImg">Current image:</p>
            <img src="/images/<%=product.images[0].filename %>" alt="">
            <div class="mb-3">
              <label for="productPrice" class="form-label">Product Price</label>
              <input type="number" value = <%= locals.product.price %> name="price" class="form-control" id="productPrice" placeholder="Enter product price">
            </div>
            <div class="mb-3">
                <label for="productStock" class="form-label">Product Initial Stock</label>
                <input type="number" value = <%= locals.product.stock %>  name="stock" class="form-control" id="productStock" placeholder="Enter product stock">
              </div>
              <div class="mb-3">
                <label for="productCategory" class="form-label">Product Category</label>
                <select value="<%= locals.product.category %>" class="form-select" name="productCategory" id="productCategory" aria-label="Product Category">
                  <option selected>Select product category</option>
                 <% categories.forEach(function(category)  { %>
                  <% if (category.isActive) { %>
                    <option value="<%= category._id %>">
                      <%= category.name %>
                    </option>
                  <% } %> 
                  <% }); %>
                </select>
              </div>
              <div class="mb-3">
                  <label for="productSubCategory" name="productSubCategory" class="form-label">Product Subcategory</label>
                  <select value="<%= locals.product.category %>" name="productSubcategory" class="form-select" id="productSubcategory" aria-label="Product Subcategory">
                    <option selected>Select product subcategory</option>
                    <% subcategories.forEach(function(subcategory)  { %>
                      <% if (subcategory.isActive) { %>
                        <option value="<%= subcategory._id %>">
                          <%= subcategory.name %>
                        </option>
                      <% } %> 
                      <% }); %>
                  </select>
              </div>
            <button type="submit" class="btn enableBtn">Add Product</button>
          </form>
        </div>
 </div>
</body>
</html>