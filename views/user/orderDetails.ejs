<%- include('../layout/header.ejs') %>
  <link rel="stylesheet" href="/stylesheets/userStyles/userSignIn.css" type="text/css">
  <link rel="stylesheet" href="/stylesheets/userStyles/categoryBar.css" type="text/css">
  <link rel="stylesheet" href="/stylesheets/userStyles/home.css" type="text/css">
  <link rel="stylesheet" href="/stylesheets/userStyles/wishlist.css" type="text/css">

  </head>

  <body class="d-flex flex-column w-100 align-items-center">
    <%- include('../layout/nav.ejs') %>
        <div class="d-flex flex-column align-items-center mb-5" style='margin-top: 100px;'>
          <h3 class="m-0">Order details</h3>
          <div class="underLine"></div>
        </div>
        <div class="p-3 w-50  d-flex flex-column justify-content-center cursor-pointer align-items-start gap-3" style="border-radius: 10px; color: black; background-color: #f4f5f4; box-shadow: 0px 2px 3px 1px rgb(202, 202, 202);">
          <span class='d-flex align-items-end gap-2 w-100 justify-content-between'><span class='d-flex align-items-end gap-2'><h6 class='m-0'>Order Id:</h6><span style='font-size: 12px;'><%= order._id  %></span></span>

          <% if (order.orderStatus === 'confirmed' || order.orderStatus ===  'shipped' || order.orderStatus === 'outForDelivery') {  %>
            <a href='cancel' style='text-decoration: underline; color: rgb(190, 170, 17);'>Cancel</a>
          <% } else if(order.orderStatus === 'delivered') { %>
            <a href='return' style='text-decoration: underline; color: rgb(165, 76, 20);'>Return</a>
          <% } %>
        </span>
          <div class='d-flex w-100 gap-4'>
            <div class='w-100 d-flex gap-3 flex-column'>
              <% order.products.forEach(product => { %>
                <div class='ps-2 d-flex gap-3 align-items-center justify-content-between' style='background-color: #e3e3e3; border-radius: 10px;'>
                  <div class='d-flex align-items-center gap-3'>
                    <img style="width: 70px;" src="/images/<%= product.product.images[0].filename%>" alt="">
                    <div>
                      <h6 class='m-0'><%= product.product.productName  %></h6>
                      <span style='font-size: 12px;'>Quantity: <%= product.quantity  %></span>
                    </div>
                  </div>
                  <span class='d-flex align-items-center m-3' style='font-weight: 400;'>₹  <%= product.product.price  %></span>
                </div>
              <% })%>
              <div class='d-flex align-items-start gap-2' style='background-color: #eeeeed00; border-radius: 10px;'>
                <span class='d-flex justify-content-between w-100 align-items-center gap-2 p-3' style='height: auto; font-size: 14px; background-color: #e6e6e6; border-radius: 10px;'><span>Order date: </span><h6 class='m-0'><%= order.orderDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }); %></h6></span>
                <span class='d-flex justify-content-between w-100 align-items-center gap-2 p-3' style='height: auto; font-size: 14px; background-color: #e6e6e6; border-radius: 10px;'><span>Order status: </span><h6 class='m-0'><%= order.orderStatus.charAt(0).toUpperCase()+ order.orderStatus.slice(1) %></h6></span>
                <span class='d-flex justify-content-between w-100 align-items-center gap-2 p-3' style='color: rgb(154, 34, 34); height: auto; font-size: 14px; background-color: #e6e6e6; border-radius: 10px;'><span>Order total: </span><h6 class='m-0'>₹  <%= order.total %></h6></span>
              </div>
            </div>
            
          </div>
       </div>
       
       <div class="p-3 w-50 mt-3 d-flex flex-column justify-content-center align-items-start gap-3" style="border-radius: 10px; color: black; background-color: #f4f5f4; box-shadow: 0px 2px 3px 1px rgb(202, 202, 202);">
        <div class='d-flex w-100 gap-4 p-3'>
          <div class='w-100 d-flex gap-3 flex-column'>
            <h6 class='m-0'>Address</h6>
            <div class='d-flex flex-column align-items-start border p-3 style='background-color: #eeeeed00; border-radius: 10px;'>
              <span class='m-0 w-100 d-flex justify-content-between'>
                <span><%= address.name  %></span>
                <span class='d-flex gap-2 align-items-center'><% if(address.addressType === 'home') { %>
                  <i class="fa-solid fa-house" style='font-size: 12px;'></i>
                <% } else {%>
                  <i class="fa-solid fa-briefcase d-flex align-items-end" style='font-size: 12px;'></i>
                <% } %>
                <%= address.addressType === 'home' ? ' Home ' : ' Work ' %></span>
              </span>
              <span class='m-0'><%= address.number  %></span>
              <span class='m-0'><%= address.pincode  %></span> 
              <span class='m-0'><%= address.locality  %></span> 
              <span class='m-0'><%= address.streetAddress  %></span> 
              <% if(address.landmark) {%>
                <span><%= address.landmark  %></span>
              <% } %>
              <span class='m-0'><%= address.city  %>, <%= address.state  %></span> 
              <span class='m-0'></span> 
            </div>

          </div>
          
        </div>
        </div>

       <div class="p-3 w-50 mt-3 d-flex flex-column justify-content-center align-items-start gap-3" style="border-radius: 10px; color: black; background-color: #f4f5f4; box-shadow: 0px 2px 3px 1px rgb(202, 202, 202);">
        <div class='d-flex w-100 gap-4'>
          <div class='w-100 d-flex gap-3 flex-column'>
            <div class='d-flex align-items-start gap-2' style='background-color: #eeeeed00; border-radius: 10px;'>
              <span class='d-flex justify-content-center w-100 align-items-center gap-2 p-3' style='height: auto; color: #335b20; font-size: 14px; background-color: #b3de9f; border-radius: 10px;'><h6 class='m-0'>Order confirmed <i class="fa-regular fa-circle-check"></i></h6></span>
              <span class='d-flex justify-content-center w-100 align-items-center gap-2 p-3' style='height: auto; font-size: 14px; background-color: #e6e6e6; border-radius: 10px;'><h6 class='m-0'>Shipped </h6></span>
              <span class='d-flex justify-content-center w-100 align-items-center gap-2 p-3' style='height: auto; font-size: 14px; background-color: #e6e6e6; border-radius: 10px;'><h6 class='m-0'>Out for delivery</h6></span>
              <span class='d-flex justify-content-center w-100 align-items-center gap-2 p-3' style='height: auto; font-size: 14px; background-color: #e6e6e6; border-radius: 10px;'><h6 class='m-0'>Delivered</h6></span>
            </div>

          </div>
          
        </div>
        </div>

  </body>
  <script src="/javascripts/user/wishlist.js"></script>

  </html>